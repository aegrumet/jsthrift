<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="thriftweb.js"></script>
<script src="idljs/ThriftTest.thrift.js"></script>
<script src="parse/all.js"></script>
<script>
$(document).ready(function() {
  $("#idltext").val(thriftTest);
  $("#idlform").on("submit",function(){

    $("#idlcompile").attr("disabled","disabled");
    thriftweb.yy = module.exports;
    thriftweb.parse($("#idltext").val());
    var s = $("#svc");
    var services = thriftweb.yy.g_program.get_services();
    for (var i = 0; i < services.length; i++) {
      var div = $("<div>");
      div.html(services[i].get_name() + " - " + services[i].get_doc());
      var ul = $("<ul>");
      div.append(ul);
      s.append(div);
      var fn = services[i].get_functions();
      for (var j = 0; j < fn.length; j++) {
        ul.append($("<li>").html(fn[j].get_name()+ " - " + fn[j].get_doc()));
      }
    }

    return false;
  });
});

</script>
</head>
<body>

<h1>IDL</h1>
<form id="idlform">
<textarea id="idltext" cols="80" rows="25"></textarea>
<br />
<input type="submit" id="idlcompile" value="Compile" />
</form>

<h1>Services</h1>
<div id="svc"></div>

</body>
</html>
